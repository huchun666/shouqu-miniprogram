<!--pages/index/index.wxml-->
<view class="container">
  <!-- 车辆状态卡片 -->
  <view class="status-card card">
    <view class="status-header">
      <view class="vehicle-info">
        <text class="vehicle-name">{{vehicle.name || '未连接车辆'}}</text>
        <text class="vehicle-model">{{vehicle.model || ''}}</text>
      </view>
      <view class="connection-status {{isConnected ? 'connected' : 'disconnected'}}">
        <text>{{isConnected ? '已连接' : '未连接'}}</text>
      </view>
    </view>

    <!-- 电量显示 -->
    <view class="battery-section">
      <view class="battery-info">
        <text class="battery-value">{{battery}}%</text>
        <text class="battery-label">电量</text>
      </view>
      <view class="battery-bar">
        <view class="battery-fill" style="width: {{battery}}%"></view>
      </view>
    </view>

    <!-- 关键信息 -->
    <view class="info-grid">
      <view class="info-item">
        <text class="info-value">{{range}}km</text>
        <text class="info-label">续航里程</text>
      </view>
      <view class="info-item">
        <text class="info-value">{{speed}}km/h</text>
        <text class="info-label">当前速度</text>
      </view>
      <view class="info-item">
        <text class="info-value">{{mileage}}km</text>
        <text class="info-label">总里程</text>
      </view>
    </view>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions card">
    <view class="section-title">快速操作</view>
    <view class="action-grid">
      <view class="action-item" bindtap="handleQuickUnlock" wx:if="{{isLocked}}">
        <image class="action-icon" src="/assets/icons/unlock.png"></image>
        <text class="action-text">解锁</text>
      </view>
      <view class="action-item" bindtap="handleQuickLock" wx:else>
        <image class="action-icon" src="/assets/icons/lock.png"></image>
        <text class="action-text">锁定</text>
      </view>
      <view class="action-item" bindtap="goToFind">
        <image class="action-icon" src="/assets/icons/find.png"></image>
        <text class="action-text">寻车</text>
      </view>
      <view class="action-item" bindtap="goToControl">
        <image class="action-icon" src="/assets/icons/control.png"></image>
        <text class="action-text">控制</text>
      </view>
    </view>
  </view>

  <!-- 功能入口 -->
  <view class="features card">
    <view class="section-title">功能</view>
    <view class="feature-list">
      <view class="feature-item" bindtap="goToStatus">
        <view class="feature-left">
          <image class="feature-icon" src="/assets/icons/status.png"></image>
          <text class="feature-text">实时状态</text>
        </view>
        <text class="feature-arrow">></text>
      </view>
      <view class="feature-item" bindtap="goToTrip">
        <view class="feature-left">
          <image class="feature-icon" src="/assets/icons/trip.png"></image>
          <text class="feature-text">行程记录</text>
        </view>
        <text class="feature-arrow">></text>
      </view>
      <view class="feature-item" bindtap="goToBattery">
        <view class="feature-left">
          <image class="feature-icon" src="/assets/icons/battery.png"></image>
          <text class="feature-text">电池管理</text>
        </view>
        <text class="feature-arrow">></text>
      </view>
      <view class="feature-item" bindtap="goToBluetooth">
        <view class="feature-left">
          <image class="feature-icon" src="/assets/icons/bluetooth.png"></image>
          <text class="feature-text">蓝牙连接</text>
        </view>
        <text class="feature-arrow">></text>
      </view>
    </view>
  </view>
</view>
